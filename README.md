# aviabot_vk

## Бот для поиска авиабилетов

# Используемые библиотеки 

import vk_api

from vk_api.bot_longpoll import VkBotLongPoll

from pony.orm import db_session

from aviabot import handlers

from models import UserState, BaseApplications

import random

import logging

import handlers

import requests


Бот поддерживает команды:
/ticket — начинает сценарий заказа билетов;
/help — выдает справку о том, как работает робот.

В приветственном сообщении и в ответ на нераспознанное сообщение дублирует текст /help.


Бот имеет функцию диспетчер. 

Диспетчер — это функция, которая отдает список рейсов по городу отправления, городу назначения и заданной дате
(выдает 5 рейсов, ближайших к заданной дате).

Сценарий заказа билетов:
Шаг 1. Ввод города отправления. Каждый город должен распознаваться, если пользователь пишет его с маленькой
буквы или меняет окончание (использовать регулярные выражения). Если пользователь вводит город неправильно,
следует предложить ему варианты городов, в которые есть рейсы.
Шаг 2. Ввод города назначения. Правила распознавания те же.
Шаг 2*. Если между выбранными городами нет рейса, говорим об этом и завершаем сценарий.
Шаг 3. Ввод даты: спрашиваем у пользователя дату вылета в формате 01-05-2019.
Шаг 4. Выбор рейса. С помощью диспетчера выдаем 5 ближайших к указанной дате рейсов с указанием их номеров и
просим ввести понравившийся номер.
Шаг 5. Уточняем количество мест (от 1 до 5).
Шаг 6. Предлагаем написать комментарий в произвольной форме.
Шаг 7. Уточняем введенные данные. Пользователь должен ввести "да" или "нет". Если пользователь вводит "нет",
сценарий завершается с предложением попробовать еще раз. В “боевых” условиях стоит уточнить у пользователя
неверные поля и изменить только их, но в рамках учебной практики, чтобы излишне не усложнять код условиями,
можно запустить весь сценарий заново.
Шаг 8. Запрашиваем номер телефона.
Шаг 9. Сообщаем пользователю, что с ним свяжутся по введенному номеру.

Если во время сценария вводится команда (/ticket или /help), то сценарий останавливается и выполняется команда
(в отличие от примера, разобранного в записи).

